function loadWeather(o,e,t){$(".select-location").hide(),$(".weather, .weather-controls").show(),$.simpleWeather({zipcode:o,unit:"f",location:e,woeid:t,success:function(o){html="<h1>"+o.city+", "+o.region+"</h1>",html+='<p class="weather-icon"><span class="weather-'+o.code+'"></span></p>',html+='<h2 class="current-weather">'+o.currently+'<span class="fahrenheit"> '+o.temp+'&deg;F</span><span class="celsius"> '+o.tempAlt+"&deg;C</span></h2>",html+='<section class="forcast fahrenheit"><h3>Today</h3><ul class="weatherforcast"><li>High '+o.high+"&deg;F</li><li>Low "+o.low+"&deg;F</li></ul>",html+='<h3>Tomorrow</h3><ul class="weatherforcast"><li>High '+o.tomorrow.high+"&deg;F</li><li>Low "+o.tomorrow.low+"&deg;F</li></ul></section>",html+='<section class="forcast celsius"><h3>Today</h3><ul class="weatherforcast"><li>High '+o.highAlt+"&deg;C</li><li>Low "+o.lowAlt+"&deg;C</li></ul>",html+='<h3>Tomorrow</h3><ul class="weatherforcast"><li>High '+o.tomorrow.highAlt+"&deg;C</li><li>Low "+o.tomorrow.lowAlt+"&deg;C</li></ul></section>",html+='<section class="sunrise"><ul><li><h3>Sunrise</h3></li><li class="time">'+o.sunrise+'</li></ul><ul><li><h3>Sunset</h3></li><li class="time">'+o.sunset+"</li></ul></section>",$(".weather").html(html)},error:function(o){$(".weather").html("<p>"+o+"</p>")}})}var urlParams;(window.onpopstate=function(){var o,e=/\+/g,t=/([^&=]+)=?([^&]*)/g,i=function(o){return decodeURIComponent(o.replace(e," "))},l=window.location.search.substring(1);for(urlParams={};o=t.exec(l);)urlParams[i(o[1])]=i(o[2])})(),$(document).ready(function(){var o=urlParams.zip,e=urlParams.city;"standalone"in navigator&&!navigator.standalone&&/iphone|ipod|ipad/gi.test(navigator.platform)&&/Safari/i.test(navigator.appVersion)&&$("p.ios").show(),"geolocation"in navigator?$(".current-location").show():$(".current-location").hide(),$(".current-location").on("click",function(){navigator.geolocation.getCurrentPosition(function(o){loadWeather("",o.coords.latitude+","+o.coords.longitude)})}),(o||e)&&($(".select-location").hide(),$(".weather, .weather-controls").show(),loadWeather(o,e,"")),$(".weather-controls .change").on("click",function(){$(".select-location").show(),$(".weather, .weather-controls").hide()}),$(".f-deg").on("click",function(){$(".celsius").hide(),$(".fahrenheit").show()}),$(".c-deg").on("click",function(){$(".fahrenheit").hide(),$(".celsius").show()})});